{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/admin-dash/lib/supabase.ts"],"sourcesContent":["import { createBrowserClient } from '@supabase/ssr'\r\nimport { createClient as createSupabaseClient } from '@supabase/supabase-js'\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n\r\n// Legacy client for non-auth requests\r\nexport const supabase = createSupabaseClient(supabaseUrl, supabaseAnonKey)\r\n\r\n// Client for auth-enabled requests in Client Components (using @supabase/ssr)\r\nexport const createAuthClient = () =>\r\n    createBrowserClient(supabaseUrl, supabaseAnonKey)\r\n"],"names":[],"mappings":";;;;;;AAGoB;AAHpB;AAAA;AACA;;;AAEA,MAAM;AACN,MAAM;AAGC,MAAM,WAAW,IAAA,2QAAoB,EAAC,aAAa;AAGnD,MAAM,mBAAmB,IAC5B,IAAA,iTAAmB,EAAC,aAAa"}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///D:/admin-dash/lib/auth-context.tsx"],"sourcesContent":["\"use client\"\n\nimport { createContext, useContext, useState, useEffect, type ReactNode } from \"react\"\nimport { createAuthClient } from \"./supabase\"\nimport type { User as SupabaseUser } from \"@supabase/supabase-js\"\nimport { useRouter } from \"next/navigation\"\n\ninterface User {\n  id: string\n  email: string\n  role?: string\n  user_metadata?: {\n    full_name?: string\n    name?: string\n    phone?: string\n    [key: string]: any\n  }\n}\n\ninterface AuthContextType {\n  user: User | null\n  isLoading: boolean\n  login: (email: string, password: string) => Promise<boolean>\n  logout: () => Promise<void>\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const router = useRouter()\n\n  useEffect(() => {\n    const supabase = createAuthClient()\n\n    // Check active session\n    const initializeAuth = async () => {\n      try {\n        const { data: { session } } = await supabase.auth.getSession()\n\n        if (session?.user) {\n          setUser({\n            id: session.user.id,\n            email: session.user.email!,\n            role: session.user.user_metadata?.role || 'admin'\n          })\n        }\n      } catch (error) {\n        console.error('Error initializing auth:', error)\n      } finally {\n        setIsLoading(false)\n      }\n    }\n\n    initializeAuth()\n\n    // Listen for auth changes\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(async (event, session) => {\n      if (session?.user) {\n        setUser({\n          id: session.user.id,\n          email: session.user.email!,\n          role: session.user.user_metadata?.role || 'admin'\n        })\n      } else {\n        setUser(null)\n      }\n\n      setIsLoading(false)\n    })\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [])\n\n  const login = async (email: string, password: string): Promise<boolean> => {\n    setIsLoading(true)\n\n    try {\n      const supabase = createAuthClient()\n      const { data, error } = await supabase.auth.signInWithPassword({\n        email,\n        password,\n      })\n\n      if (error) {\n        console.error('Login error:', error.message)\n        setIsLoading(false)\n        return false\n      }\n\n      if (data.user) {\n        setUser({\n          id: data.user.id,\n          email: data.user.email!,\n          role: data.user.user_metadata?.role || 'admin'\n        })\n        setIsLoading(false)\n        return true\n      }\n\n      setIsLoading(false)\n      return false\n    } catch (error) {\n      console.error('Login exception:', error)\n      setIsLoading(false)\n      return false\n    }\n  }\n\n  const logout = async () => {\n    const supabase = createAuthClient()\n    await supabase.auth.signOut()\n    setUser(null)\n    router.push('/')\n  }\n\n  return (\n    <AuthContext.Provider value={{ user, isLoading, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within an AuthProvider\")\n  }\n  return context\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;;;AALA;;;;AA0BA,MAAM,4BAAc,IAAA,6SAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,wSAAQ,EAAc;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,wSAAQ,EAAC;IAC3C,MAAM,SAAS,IAAA,iRAAS;IAExB,IAAA,ySAAS;kCAAC;YACR,MAAM,WAAW,IAAA,sIAAgB;YAEjC,uBAAuB;YACvB,MAAM;yDAAiB;oBACrB,IAAI;wBACF,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU;wBAE5D,IAAI,SAAS,MAAM;4BACjB,QAAQ;gCACN,IAAI,QAAQ,IAAI,CAAC,EAAE;gCACnB,OAAO,QAAQ,IAAI,CAAC,KAAK;gCACzB,MAAM,QAAQ,IAAI,CAAC,aAAa,EAAE,QAAQ;4BAC5C;wBACF;oBACF,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,4BAA4B;oBAC5C,SAAU;wBACR,aAAa;oBACf;gBACF;;YAEA;YAEA,0BAA0B;YAC1B,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB;0CAAC,OAAO,OAAO;oBAC/E,IAAI,SAAS,MAAM;wBACjB,QAAQ;4BACN,IAAI,QAAQ,IAAI,CAAC,EAAE;4BACnB,OAAO,QAAQ,IAAI,CAAC,KAAK;4BACzB,MAAM,QAAQ,IAAI,CAAC,aAAa,EAAE,QAAQ;wBAC5C;oBACF,OAAO;wBACL,QAAQ;oBACV;oBAEA,aAAa;gBACf;;YAEA;0CAAO;oBACL,aAAa,WAAW;gBAC1B;;QACF;iCAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,OAAe;QAClC,aAAa;QAEb,IAAI;YACF,MAAM,WAAW,IAAA,sIAAgB;YACjC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,kBAAkB,CAAC;gBAC7D;gBACA;YACF;YAEA,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,gBAAgB,MAAM,OAAO;gBAC3C,aAAa;gBACb,OAAO;YACT;YAEA,IAAI,KAAK,IAAI,EAAE;gBACb,QAAQ;oBACN,IAAI,KAAK,IAAI,CAAC,EAAE;oBAChB,OAAO,KAAK,IAAI,CAAC,KAAK;oBACtB,MAAM,KAAK,IAAI,CAAC,aAAa,EAAE,QAAQ;gBACzC;gBACA,aAAa;gBACb,OAAO;YACT;YAEA,aAAa;YACb,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,oBAAoB;YAClC,aAAa;YACb,OAAO;QACT;IACF;IAEA,MAAM,SAAS;QACb,MAAM,WAAW,IAAA,sIAAgB;QACjC,MAAM,SAAS,IAAI,CAAC,OAAO;QAC3B,QAAQ;QACR,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,4TAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAW;YAAO;QAAO;kBAC3D;;;;;;AAGP;GAhGgB;;QAGC,iRAAS;;;KAHV;AAkGT,SAAS;;IACd,MAAM,UAAU,IAAA,0SAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB"}}]
}