{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///D:/admin-dash/components/layout/sidebar.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Sidebar = registerClientReference(\n    function() { throw new Error(\"Attempted to call Sidebar() from the server but Sidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/layout/sidebar.tsx <module evaluation>\",\n    \"Sidebar\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,UAAU,IAAA,wQAAuB,EAC1C;IAAa,MAAM,IAAI,MAAM;AAA8N,GAC3P,+DACA","ignoreList":[0]}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/admin-dash/components/layout/sidebar.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Sidebar = registerClientReference(\n    function() { throw new Error(\"Attempted to call Sidebar() from the server but Sidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/layout/sidebar.tsx\",\n    \"Sidebar\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,UAAU,IAAA,wQAAuB,EAC1C;IAAa,MAAM,IAAI,MAAM;AAA8N,GAC3P,2CACA","ignoreList":[0]}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///D:/admin-dash/components/layout/bottom-nav.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const BottomNav = registerClientReference(\n    function() { throw new Error(\"Attempted to call BottomNav() from the server but BottomNav is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/layout/bottom-nav.tsx <module evaluation>\",\n    \"BottomNav\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,YAAY,IAAA,wQAAuB,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,kEACA","ignoreList":[0]}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///D:/admin-dash/components/layout/bottom-nav.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const BottomNav = registerClientReference(\n    function() { throw new Error(\"Attempted to call BottomNav() from the server but BottomNav is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/layout/bottom-nav.tsx\",\n    \"BottomNav\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,YAAY,IAAA,wQAAuB,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,8CACA","ignoreList":[0]}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///D:/admin-dash/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file:///D:/admin-dash/lib/supabase.ts"],"sourcesContent":["import { createBrowserClient } from '@supabase/ssr'\r\nimport { createClient as createSupabaseClient } from '@supabase/supabase-js'\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n\r\n// Legacy client for non-auth requests\r\nexport const supabase = createSupabaseClient(supabaseUrl, supabaseAnonKey)\r\n\r\n// Client for auth-enabled requests in Client Components (using @supabase/ssr)\r\nexport const createAuthClient = () =>\r\n    createBrowserClient(supabaseUrl, supabaseAnonKey)\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;;;AAEA,MAAM;AACN,MAAM;AAGC,MAAM,WAAW,IAAA,uMAAoB,EAAC,aAAa;AAGnD,MAAM,mBAAmB,IAC5B,IAAA,iMAAmB,EAAC,aAAa"}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///D:/admin-dash/components/layout/dashboard-layout.tsx"],"sourcesContent":["import { useState, type ReactNode, useEffect } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { Sidebar } from \"./sidebar\"\nimport { BottomNav } from \"./bottom-nav\"\nimport { cn } from \"@/lib/utils\"\nimport { supabase } from \"@/lib/supabase\"\nimport { toast } from \"sonner\"\n\ninterface DashboardLayoutProps {\n  children: ReactNode\n}\n\nexport function DashboardLayout({ children }: DashboardLayoutProps) {\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false)\n  const router = useRouter()\n\n  useEffect(() => {\n    const channel = supabase\n      .channel('booking-updates')\n      .on(\n        'postgres_changes',\n        {\n          event: '*',\n          schema: 'public',\n          table: 'bookings',\n        },\n        (payload) => {\n          // Handle New Booking (INSERT)\n          if (payload.eventType === 'INSERT') {\n            const newBooking = payload.new as any\n\n            // Play notification sound\n            try {\n              const audio = new Audio('https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3')\n              audio.volume = 0.5\n              audio.play().catch(e => console.log('Audio play blocked', e))\n            } catch (e) {\n              console.log('Audio setup failed', e)\n            }\n\n            toast.success(\"New Booking Received! ðŸŽ‰\", {\n              description: `${newBooking.customer_name} booked ${newBooking.package_title} for ${new Date(newBooking.date || newBooking.booking_date).toLocaleDateString()}`,\n              action: {\n                label: \"View Details\",\n                onClick: () => router.push('/dashboard/bookings')\n              },\n              duration: 8000,\n            })\n          }\n          // Handle Cancellation (UPDATE)\n          else if (payload.eventType === 'UPDATE') {\n            const newBooking = payload.new as any\n            const oldBooking = payload.old as any\n\n            // Only notify if status changed to cancelled\n            if (newBooking.status === 'cancelled') {\n              toast.error(\"Booking Cancelled âš ï¸\", {\n                description: `Booking for ${newBooking.customer_name} has been cancelled.`,\n                duration: 6000,\n              })\n            }\n          }\n        }\n      )\n      .subscribe()\n\n    return () => {\n      supabase.removeChannel(channel)\n    }\n  }, [router])\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Sidebar collapsed={sidebarCollapsed} setCollapsed={setSidebarCollapsed} />\n      <main\n        className={cn(\n          \"min-h-screen transition-all duration-300\",\n          sidebarCollapsed ? \"lg:ml-20\" : \"lg:ml-72\",\n          \"pb-20 lg:pb-0\",\n        )}\n      >\n        {children}\n      </main>\n      <BottomNav />\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AAMO,SAAS,gBAAgB,EAAE,QAAQ,EAAwB;IAChE,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAC;IACzD,MAAM,SAAS,IAAA,kMAAS;IAExB,IAAA,kNAAS,EAAC;QACR,MAAM,UAAU,2HAAQ,CACrB,OAAO,CAAC,mBACR,EAAE,CACD,oBACA;YACE,OAAO;YACP,QAAQ;YACR,OAAO;QACT,GACA,CAAC;YACC,8BAA8B;YAC9B,IAAI,QAAQ,SAAS,KAAK,UAAU;gBAClC,MAAM,aAAa,QAAQ,GAAG;gBAE9B,0BAA0B;gBAC1B,IAAI;oBACF,MAAM,QAAQ,IAAI,MAAM;oBACxB,MAAM,MAAM,GAAG;oBACf,MAAM,IAAI,GAAG,KAAK,CAAC,CAAA,IAAK,QAAQ,GAAG,CAAC,sBAAsB;gBAC5D,EAAE,OAAO,GAAG;oBACV,QAAQ,GAAG,CAAC,sBAAsB;gBACpC;gBAEA,iJAAK,CAAC,OAAO,CAAC,4BAA4B;oBACxC,aAAa,GAAG,WAAW,aAAa,CAAC,QAAQ,EAAE,WAAW,aAAa,CAAC,KAAK,EAAE,IAAI,KAAK,WAAW,IAAI,IAAI,WAAW,YAAY,EAAE,kBAAkB,IAAI;oBAC9J,QAAQ;wBACN,OAAO;wBACP,SAAS,IAAM,OAAO,IAAI,CAAC;oBAC7B;oBACA,UAAU;gBACZ;YACF,OAEK,IAAI,QAAQ,SAAS,KAAK,UAAU;gBACvC,MAAM,aAAa,QAAQ,GAAG;gBAC9B,MAAM,aAAa,QAAQ,GAAG;gBAE9B,6CAA6C;gBAC7C,IAAI,WAAW,MAAM,KAAK,aAAa;oBACrC,iJAAK,CAAC,KAAK,CAAC,wBAAwB;wBAClC,aAAa,CAAC,YAAY,EAAE,WAAW,aAAa,CAAC,oBAAoB,CAAC;wBAC1E,UAAU;oBACZ;gBACF;YACF;QACF,GAED,SAAS;QAEZ,OAAO;YACL,2HAAQ,CAAC,aAAa,CAAC;QACzB;IACF,GAAG;QAAC;KAAO;IAEX,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,2IAAO;gBAAC,WAAW;gBAAkB,cAAc;;;;;;0BACpD,8OAAC;gBACC,WAAW,IAAA,kHAAE,EACX,4CACA,mBAAmB,aAAa,YAChC;0BAGD;;;;;;0BAEH,8OAAC,mJAAS;;;;;;;;;;;AAGhB"}},
    {"offset": {"line": 222, "column": 0}, "map": {"version":3,"sources":["file:///D:/admin-dash/components/dashboard/kpi-cards.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const KPICards = registerClientReference(\n    function() { throw new Error(\"Attempted to call KPICards() from the server but KPICards is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboard/kpi-cards.tsx <module evaluation>\",\n    \"KPICards\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,WAAW,IAAA,wQAAuB,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,oEACA","ignoreList":[0]}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///D:/admin-dash/components/dashboard/kpi-cards.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const KPICards = registerClientReference(\n    function() { throw new Error(\"Attempted to call KPICards() from the server but KPICards is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboard/kpi-cards.tsx\",\n    \"KPICards\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,WAAW,IAAA,wQAAuB,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,gDACA","ignoreList":[0]}},
    {"offset": {"line": 250, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 258, "column": 0}, "map": {"version":3,"sources":["file:///D:/admin-dash/components/dashboard/schedule-widget.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ScheduleWidget = registerClientReference(\n    function() { throw new Error(\"Attempted to call ScheduleWidget() from the server but ScheduleWidget is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboard/schedule-widget.tsx <module evaluation>\",\n    \"ScheduleWidget\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,iBAAiB,IAAA,wQAAuB,EACjD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,0EACA","ignoreList":[0]}},
    {"offset": {"line": 272, "column": 0}, "map": {"version":3,"sources":["file:///D:/admin-dash/components/dashboard/schedule-widget.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ScheduleWidget = registerClientReference(\n    function() { throw new Error(\"Attempted to call ScheduleWidget() from the server but ScheduleWidget is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboard/schedule-widget.tsx\",\n    \"ScheduleWidget\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,iBAAiB,IAAA,wQAAuB,EACjD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,sDACA","ignoreList":[0]}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 294, "column": 0}, "map": {"version":3,"sources":["file:///D:/admin-dash/components/ui/glass-card.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\nimport type { ReactNode } from \"react\"\n\ninterface GlassCardProps extends React.HTMLAttributes<HTMLDivElement> {\n  children: ReactNode\n  className?: string\n  hover?: boolean\n  variant?: \"glass\" | \"solid\"\n}\n\nexport function GlassCard({ children, className, hover = false, variant = \"solid\", ...props }: GlassCardProps) {\n  return (\n    <div\n      className={cn(\n        \"rounded-3xl p-6\",\n        variant === \"solid\"\n          ? \"bg-white border border-gray-100 shadow-sm\"\n          : \"bg-white/60 backdrop-blur-xl border border-white/20 shadow-[0_8px_32px_rgba(0,0,0,0.04)]\",\n        hover && \"transition-all duration-300 hover:scale-[1.02] hover:shadow-md cursor-pointer\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAUO,SAAS,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,KAAK,EAAE,UAAU,OAAO,EAAE,GAAG,OAAuB;IAC3G,qBACE,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,mBACA,YAAY,UACR,8CACA,4FACJ,SAAS,iFACT;QAED,GAAG,KAAK;kBAER;;;;;;AAGP"}},
    {"offset": {"line": 317, "column": 0}, "map": {"version":3,"sources":["file:///D:/admin-dash/components/dashboard/booking-chart.tsx"],"sourcesContent":["import { useMemo } from \"react\"\nimport { GlassCard } from \"@/components/ui/glass-card\"\nimport type { Booking } from \"@/lib/types\"\nimport { AreaChart, Area, XAxis, YAxis, Tooltip, ResponsiveContainer } from \"recharts\"\nimport { startOfWeek, endOfWeek, eachDayOfInterval, format, isSameDay, parseISO } from \"date-fns\"\n\ninterface BookingChartProps {\n  bookings: Booking[]\n}\n\nexport function BookingChart({ bookings }: BookingChartProps) {\n  const chartData = useMemo(() => {\n    const today = new Date()\n    const start = startOfWeek(today, { weekStartsOn: 1 }) // Monday\n    const end = endOfWeek(today, { weekStartsOn: 1 }) // Sunday\n\n    const days = eachDayOfInterval({ start, end })\n\n    return days.map((day) => {\n      const count = bookings.filter((booking) => {\n        if (!booking.date) return false\n        // Handle both ISO string and YYYY-MM-DD format\n        const bookingDate = typeof booking.date === 'string'\n          ? parseISO(booking.date)\n          : new Date(booking.date)\n        return isSameDay(bookingDate, day)\n      }).length\n\n      return {\n        date: format(day, \"EEE\"), // Mon, Tue, etc.\n        bookings: count,\n        fullDate: format(day, \"MMM d, yyyy\"),\n      }\n    })\n  }, [bookings])\n\n  return (\n    <GlassCard variant=\"solid\" className=\"animate-slide-up\" style={{ animationDelay: \"400ms\" } as React.CSSProperties}>\n      <div className=\"flex items-center justify-between mb-6\">\n        <h3 className=\"font-semibold text-lg\">Booking Trends</h3>\n        <span className=\"text-sm text-muted-foreground\">This Week</span>\n      </div>\n\n      <div className=\"h-64\">\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <AreaChart data={chartData} margin={{ top: 10, right: 10, left: -20, bottom: 0 }}>\n            <defs>\n              <linearGradient id=\"bookingGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                <stop offset=\"5%\" stopColor=\"#C19B76\" stopOpacity={0.3} />\n                <stop offset=\"95%\" stopColor=\"#C19B76\" stopOpacity={0} />\n              </linearGradient>\n            </defs>\n            <XAxis dataKey=\"date\" axisLine={false} tickLine={false} tick={{ fontSize: 12, fill: \"#94a3b8\" }} />\n            <YAxis axisLine={false} tickLine={false} tick={{ fontSize: 12, fill: \"#94a3b8\" }} allowDecimals={false} />\n            <Tooltip\n              contentStyle={{\n                backgroundColor: \"white\",\n                border: \"1px solid #e5e7eb\",\n                borderRadius: \"16px\",\n                boxShadow: \"0 4px 6px -1px rgba(0, 0, 0, 0.1)\",\n              }}\n              labelStyle={{ color: \"#64748b\", marginBottom: \"0.25rem\" }}\n              labelFormatter={(label, payload) => {\n                if (payload && payload.length > 0) {\n                  return payload[0].payload.fullDate\n                }\n                return label\n              }}\n              formatter={(value: number) => [`${value} bookings`, \"Bookings\"]}\n            />\n            <Area type=\"monotone\" dataKey=\"bookings\" stroke=\"#C19B76\" strokeWidth={2} fill=\"url(#bookingGradient)\" />\n          </AreaChart>\n        </ResponsiveContainer>\n      </div>\n    </GlassCard>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;AAMO,SAAS,aAAa,EAAE,QAAQ,EAAqB;IAC1D,MAAM,YAAY,IAAA,gNAAO,EAAC;QACxB,MAAM,QAAQ,IAAI;QAClB,MAAM,QAAQ,IAAA,yJAAW,EAAC,OAAO;YAAE,cAAc;QAAE,GAAG,SAAS;;QAC/D,MAAM,MAAM,IAAA,qJAAS,EAAC,OAAO;YAAE,cAAc;QAAE,GAAG,SAAS;;QAE3D,MAAM,OAAO,IAAA,qKAAiB,EAAC;YAAE;YAAO;QAAI;QAE5C,OAAO,KAAK,GAAG,CAAC,CAAC;YACf,MAAM,QAAQ,SAAS,MAAM,CAAC,CAAC;gBAC7B,IAAI,CAAC,QAAQ,IAAI,EAAE,OAAO;gBAC1B,+CAA+C;gBAC/C,MAAM,cAAc,OAAO,QAAQ,IAAI,KAAK,WACxC,IAAA,mJAAQ,EAAC,QAAQ,IAAI,IACrB,IAAI,KAAK,QAAQ,IAAI;gBACzB,OAAO,IAAA,qJAAS,EAAC,aAAa;YAChC,GAAG,MAAM;YAET,OAAO;gBACL,MAAM,IAAA,+JAAM,EAAC,KAAK;gBAClB,UAAU;gBACV,UAAU,IAAA,+JAAM,EAAC,KAAK;YACxB;QACF;IACF,GAAG;QAAC;KAAS;IAEb,qBACE,8OAAC,+IAAS;QAAC,SAAQ;QAAQ,WAAU;QAAmB,OAAO;YAAE,gBAAgB;QAAQ;;0BACvF,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAwB;;;;;;kCACtC,8OAAC;wBAAK,WAAU;kCAAgC;;;;;;;;;;;;0BAGlD,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,0LAAmB;oBAAC,OAAM;oBAAO,QAAO;8BACvC,cAAA,8OAAC,kKAAS;wBAAC,MAAM;wBAAW,QAAQ;4BAAE,KAAK;4BAAI,OAAO;4BAAI,MAAM,CAAC;4BAAI,QAAQ;wBAAE;;0CAC7E,8OAAC;0CACC,cAAA,8OAAC;oCAAe,IAAG;oCAAkB,IAAG;oCAAI,IAAG;oCAAI,IAAG;oCAAI,IAAG;;sDAC3D,8OAAC;4CAAK,QAAO;4CAAK,WAAU;4CAAU,aAAa;;;;;;sDACnD,8OAAC;4CAAK,QAAO;4CAAM,WAAU;4CAAU,aAAa;;;;;;;;;;;;;;;;;0CAGxD,8OAAC,8JAAK;gCAAC,SAAQ;gCAAO,UAAU;gCAAO,UAAU;gCAAO,MAAM;oCAAE,UAAU;oCAAI,MAAM;gCAAU;;;;;;0CAC9F,8OAAC,8JAAK;gCAAC,UAAU;gCAAO,UAAU;gCAAO,MAAM;oCAAE,UAAU;oCAAI,MAAM;gCAAU;gCAAG,eAAe;;;;;;0CACjG,8OAAC,kKAAO;gCACN,cAAc;oCACZ,iBAAiB;oCACjB,QAAQ;oCACR,cAAc;oCACd,WAAW;gCACb;gCACA,YAAY;oCAAE,OAAO;oCAAW,cAAc;gCAAU;gCACxD,gBAAgB,CAAC,OAAO;oCACtB,IAAI,WAAW,QAAQ,MAAM,GAAG,GAAG;wCACjC,OAAO,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,QAAQ;oCACpC;oCACA,OAAO;gCACT;gCACA,WAAW,CAAC,QAAkB;wCAAC,GAAG,MAAM,SAAS,CAAC;wCAAE;qCAAW;;;;;;0CAEjE,8OAAC,4JAAI;gCAAC,MAAK;gCAAW,SAAQ;gCAAW,QAAO;gCAAU,aAAa;gCAAG,MAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM3F"}},
    {"offset": {"line": 545, "column": 0}, "map": {"version":3,"sources":["file:///D:/admin-dash/lib/user-utils.ts"],"sourcesContent":["/**\r\n * Utility functions for safely handling user data from Supabase Auth\r\n */\r\n\r\ninterface SupabaseUser {\r\n    id: string\r\n    email: string\r\n    user_metadata?: {\r\n        full_name?: string\r\n        name?: string\r\n        [key: string]: any\r\n    }\r\n    role?: string\r\n}\r\n\r\n/**\r\n * Get display name from Supabase user object\r\n * Priority: user_metadata.full_name > user_metadata.name > email prefix > 'Admin'\r\n */\r\nexport function getUserDisplayName(user: SupabaseUser | null | undefined): string {\r\n    if (!user) return 'Admin'\r\n\r\n    // Try user_metadata.full_name\r\n    if (user.user_metadata?.full_name) {\r\n        return user.user_metadata.full_name\r\n    }\r\n\r\n    // Try user_metadata.name\r\n    if (user.user_metadata?.name) {\r\n        return user.user_metadata.name\r\n    }\r\n\r\n    // Extract from email (part before @)\r\n    if (user.email) {\r\n        const emailPrefix = user.email.split('@')[0]\r\n        // Capitalize first letter and replace dots/underscores with spaces\r\n        return emailPrefix\r\n            .replace(/[._-]/g, ' ')\r\n            .split(' ')\r\n            .map(word => word.charAt(0).toUpperCase() + word.slice(1))\r\n            .join(' ')\r\n    }\r\n\r\n    return 'Admin'\r\n}\r\n\r\n/**\r\n * Get first name from display name\r\n */\r\nexport function getUserFirstName(user: SupabaseUser | null | undefined): string {\r\n    const fullName = getUserDisplayName(user)\r\n    return fullName.split(' ')[0]\r\n}\r\n\r\n/**\r\n * Get initials from user object for avatar\r\n */\r\nexport function getUserInitials(user: SupabaseUser | null | undefined): string {\r\n    if (!user) return 'A'\r\n\r\n    const displayName = getUserDisplayName(user)\r\n    const nameParts = displayName.split(' ')\r\n\r\n    if (nameParts.length >= 2) {\r\n        return (nameParts[0].charAt(0) + nameParts[1].charAt(0)).toUpperCase()\r\n    }\r\n\r\n    return displayName.charAt(0).toUpperCase()\r\n}\r\n\r\n/**\r\n * Get user role with fallback\r\n */\r\nexport function getUserRole(user: SupabaseUser | null | undefined): string {\r\n    if (!user) return 'admin'\r\n    return user.role || user.user_metadata?.role || 'admin'\r\n}\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;AAiBM,SAAS,mBAAmB,IAAqC;IACpE,IAAI,CAAC,MAAM,OAAO;IAElB,8BAA8B;IAC9B,IAAI,KAAK,aAAa,EAAE,WAAW;QAC/B,OAAO,KAAK,aAAa,CAAC,SAAS;IACvC;IAEA,yBAAyB;IACzB,IAAI,KAAK,aAAa,EAAE,MAAM;QAC1B,OAAO,KAAK,aAAa,CAAC,IAAI;IAClC;IAEA,qCAAqC;IACrC,IAAI,KAAK,KAAK,EAAE;QACZ,MAAM,cAAc,KAAK,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;QAC5C,mEAAmE;QACnE,OAAO,YACF,OAAO,CAAC,UAAU,KAClB,KAAK,CAAC,KACN,GAAG,CAAC,CAAA,OAAQ,KAAK,MAAM,CAAC,GAAG,WAAW,KAAK,KAAK,KAAK,CAAC,IACtD,IAAI,CAAC;IACd;IAEA,OAAO;AACX;AAKO,SAAS,iBAAiB,IAAqC;IAClE,MAAM,WAAW,mBAAmB;IACpC,OAAO,SAAS,KAAK,CAAC,IAAI,CAAC,EAAE;AACjC;AAKO,SAAS,gBAAgB,IAAqC;IACjE,IAAI,CAAC,MAAM,OAAO;IAElB,MAAM,cAAc,mBAAmB;IACvC,MAAM,YAAY,YAAY,KAAK,CAAC;IAEpC,IAAI,UAAU,MAAM,IAAI,GAAG;QACvB,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC,MAAM,CAAC,KAAK,SAAS,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,EAAE,WAAW;IACxE;IAEA,OAAO,YAAY,MAAM,CAAC,GAAG,WAAW;AAC5C;AAKO,SAAS,YAAY,IAAqC;IAC7D,IAAI,CAAC,MAAM,OAAO;IAClB,OAAO,KAAK,IAAI,IAAI,KAAK,aAAa,EAAE,QAAQ;AACpD"}},
    {"offset": {"line": 596, "column": 0}, "map": {"version":3,"sources":["file:///D:/admin-dash/app/dashboard/page.tsx"],"sourcesContent":["import { DashboardLayout } from \"@/components/layout/dashboard-layout\"\nimport { KPICards } from \"@/components/dashboard/kpi-cards\"\nimport { ScheduleWidget } from \"@/components/dashboard/schedule-widget\"\nimport { BookingChart } from \"@/components/dashboard/booking-chart\"\nimport { useAuth } from \"@/lib/auth-context\"\nimport { useRouter } from \"next/navigation\"\nimport { useEffect, useState } from \"react\"\nimport { Loader2 } from \"lucide-react\"\nimport { supabase } from \"@/lib/supabase\"\nimport type { DashboardStats, ScheduleItem, Booking } from \"@/lib/types\"\nimport { getUserFirstName } from \"@/lib/user-utils\"\nimport {\n  startOfMonth, endOfMonth, subMonths,\n  startOfWeek, endOfWeek, subWeeks,\n  isWithinInterval, parseISO\n} from \"date-fns\"\n\nexport default function DashboardPage() {\n  const { user, isLoading } = useAuth()\n  const router = useRouter()\n  const [stats, setStats] = useState<DashboardStats>({\n    total_revenue: 0,\n    active_bookings: 0,\n    pending_inquiries: 0,\n    revenue_change: 0,\n    bookings_change: 0,\n    inquiries_change: 0,\n    cash_collected: 0,\n    pending_balance: 0,\n  })\n  const [schedule, setSchedule] = useState<ScheduleItem[]>([])\n  const [bookings, setBookings] = useState<Booking[]>([])\n  const [loadingData, setLoadingData] = useState(true)\n\n  useEffect(() => {\n    if (!isLoading && !user) {\n      router.push(\"/\")\n    }\n  }, [user, isLoading, router])\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const { data: bookingsData, error } = await supabase\n          .from('bookings')\n          .select('*')\n          .order('date', { ascending: true })\n\n        if (error) throw error\n\n        if (bookingsData) {\n          const now = new Date()\n\n          // Date Ranges\n          const currentMonthInterval = { start: startOfMonth(now), end: endOfMonth(now) }\n          const prevMonthInterval = { start: startOfMonth(subMonths(now, 1)), end: endOfMonth(subMonths(now, 1)) }\n\n          const currentWeekInterval = { start: startOfWeek(now, { weekStartsOn: 1 }), end: endOfWeek(now, { weekStartsOn: 1 }) }\n          const prevWeekInterval = { start: startOfWeek(subWeeks(now, 1), { weekStartsOn: 1 }), end: endOfWeek(subWeeks(now, 1), { weekStartsOn: 1 }) }\n\n          // Helper to check interval\n          const isInInterval = (dateStr: string | undefined, interval: { start: Date; end: Date }) => {\n            if (!dateStr) return false\n            const date = typeof dateStr === 'string' ? parseISO(dateStr) : new Date(dateStr)\n            return isWithinInterval(date, interval)\n          }\n\n          // 1. Revenue Trend (Current Month vs Previous Month)\n          const currentMonthBookings = bookingsData.filter(b => isInInterval(b.date, currentMonthInterval))\n          const prevMonthBookings = bookingsData.filter(b => isInInterval(b.date, prevMonthInterval))\n\n          const currentMonthRevenue = currentMonthBookings.reduce((sum, b) => sum + (b.total_price || 0), 0)\n          const prevMonthRevenue = prevMonthBookings.reduce((sum, b) => sum + (b.total_price || 0), 0)\n\n          const revenueChange = prevMonthRevenue === 0\n            ? (currentMonthRevenue > 0 ? 100 : 0)\n            : Math.round(((currentMonthRevenue - prevMonthRevenue) / prevMonthRevenue) * 100)\n\n          // 2. Bookings Trend (Current Month vs Previous Month)\n          const bookingsChange = prevMonthBookings.length === 0\n            ? (currentMonthBookings.length > 0 ? 100 : 0)\n            : Math.round(((currentMonthBookings.length - prevMonthBookings.length) / prevMonthBookings.length) * 100)\n\n          // 3. Pending Trend (This Week vs Last Week)\n          // Using created_at if available, otherwise date\n          const getRefDate = (b: Booking) => b.created_at || b.date\n\n          const currentWeekPending = bookingsData.filter(b =>\n            b.status === 'pending' && isInInterval(getRefDate(b), currentWeekInterval)\n          ).length\n\n          const prevWeekPending = bookingsData.filter(b =>\n            b.status === 'pending' && isInInterval(getRefDate(b), prevWeekInterval)\n          ).length\n\n          const inquiriesChange = prevWeekPending === 0\n            ? (currentWeekPending > 0 ? 100 : 0)\n            : Math.round(((currentWeekPending - prevWeekPending) / prevWeekPending) * 100)\n\n          // Global Stats\n          const totalRevenue = bookingsData.reduce((sum, b) => sum + (b.total_price || 0), 0)\n          const activeBookings = bookingsData.filter(b => b.status !== 'cancelled').length\n          const pendingInquiries = bookingsData.filter(b => b.status === 'pending').length\n          const cashCollected = bookingsData.reduce((sum, b) => sum + (b.amount_paid || 0), 0) // Changed from deposit_amount to amount_paid to be more accurate\n          const pendingBalance = bookingsData.reduce((sum, b) => sum + (b.remaining_balance || 0), 0)\n\n          setStats({\n            total_revenue: totalRevenue,\n            active_bookings: activeBookings,\n            pending_inquiries: pendingInquiries,\n            revenue_change: revenueChange,\n            bookings_change: bookingsChange,\n            inquiries_change: inquiriesChange,\n            cash_collected: cashCollected,\n            pending_balance: pendingBalance,\n          })\n\n          // Filter Today's Schedule\n          const compareDate = new Date().toISOString().split('T')[0]\n          const todaysBookings = bookingsData.filter(b => b.date === compareDate)\n\n          const scheduleItems: ScheduleItem[] = todaysBookings.map(b => ({\n            id: b.id.toString(),\n            time: b.pickup_time || '09:00',\n            name: b.name,\n            package_title: b.package_title,\n            guests: b.guests || 1,\n            driver_name: b.driver_name || b.driver,\n            pickup_location: b.pickup_location,\n            phone_number: b.phone_number,\n            special_notes: b.notes,\n            booking_id: b.id.toString(),\n            activity_type: b.activity_type,\n            payment_status: b.payment_status,\n          }))\n\n          setSchedule(scheduleItems)\n          setBookings(bookingsData)\n        }\n      } catch (error) {\n        console.error('Error fetching dashboard data:', error)\n      } finally {\n        setLoadingData(false)\n      }\n    }\n\n    fetchData()\n  }, [])\n\n  if (isLoading || !user || loadingData) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-[#C19B76]\" />\n      </div>\n    )\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"p-4 lg:p-8 space-y-6 lg:space-y-8\">\n        {/* Header */}\n        <div className=\"animate-fade-in\">\n          <h1 className=\"text-2xl sm:text-3xl lg:text-4xl font-semibold tracking-tight\">Command Center</h1>\n          <p className=\"text-muted-foreground mt-1 text-sm sm:text-base\">\n            Welcome back, {getUserFirstName(user)}. Here&apos;s your overview.\n          </p>\n        </div>\n\n        {/* KPI Cards */}\n        <KPICards stats={stats} />\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6\">\n          <ScheduleWidget schedule={schedule} />\n          <BookingChart bookings={bookings} />\n        </div>\n      </div>\n    </DashboardLayout>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}